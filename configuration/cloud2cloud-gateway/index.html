<!doctype html><html class=no-js lang=en-us><head><meta charset=utf-8><link rel=preload href=https://plgd.dev/fonts/muli-latin-200.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=https://plgd.dev/fonts/muli-latin-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=https://plgd.dev/fonts/muli-latin-800.woff2 as=font type=font/woff2 crossorigin><meta http-equiv=x-ua-compatible content="IE=edge"><title>Cloud2Cloud Gateway | plgd</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=generator content="Hugo 0.83.1"><meta name=robots content="index, follow"><link rel=stylesheet href=/output/css/app.min.bab83909a2f2fe2aa45bf7e4813899f4f705e6858479cea5bd48eee72fdf0a70.css integrity="sha256-urg5CaLy/iqkW/fkgTiZ9PcF5oWEec6lvUju5y/fCnA=" crossorigin=anonymous><meta name=description content="Service configuration overview"><script type=text/javascript src=/output/js/app.175b405753a9c0ce86ab35944e9c4cc1a758a6873209cf5106600f6b2f5a59b6.js integrity="sha256-F1tAV1OpwM6GqzWUTpxMwadYpocyCc9RBmAPay9aWbY=" crossorigin=anonymous defer></script><script async defer src=https://buttons.github.io/buttons.js></script><script src=/js/medium-zoom.min.js></script><script src=/js/rawdeflate.js></script><script>window.addEventListener('load',a=>{mediumZoom(document.querySelectorAll('.medium-zoom-image'))})</script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png href=/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicon-16x16.png sizes=16x16><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#0594cb><meta name=theme-color content="#ffffff"><meta property="og:title" content="Cloud2Cloud Gateway"><meta property="og:description" content="Service configuration overview"><meta property="og:type" content="article"><meta property="og:url" content="https://plgd.dev/configuration/cloud2cloud-gateway/"><meta property="og:image" content="https://plgd.dev/images/plgd-logo-full-white.png"><meta property="article:section" content="configuration"><meta property="article:published_time" content="2021-10-01T00:00:00+00:00"><meta property="article:modified_time" content="2022-02-02T15:35:00+00:00"><meta itemprop=name content="Cloud2Cloud Gateway"><meta itemprop=description content="Service configuration overview"><meta itemprop=datePublished content="2021-10-01T00:00:00+00:00"><meta itemprop=dateModified content="2022-02-02T15:35:00+00:00"><meta itemprop=wordCount content="1652"><meta itemprop=image content="https://plgd.dev/images/plgd-logo-full-white.png"><meta itemprop=keywords content><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://plgd.dev/images/plgd-logo-full-white.png"><meta name=twitter:title content="Cloud2Cloud Gateway"><meta name=twitter:description content="Service configuration overview"><script async src="https://www.googletagmanager.com/gtag/js?id=G-PS70WYYFKX"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-PS70WYYFKX',{anonymize_ip:!0,dimension1:'plgd.dev',dimension2:''});var trackOutboundLink=function(a,b){gtag('event','click',{event_category:'outbound',event_label:a,transport_type:'beacon'})}</script></head><body class="ma0 sans-serif bg-primary-color-light production"><nav class="bg-primary-color-dark pv4 w-100" role=navigation><div class="center flex-ns flex-wrap items-center justify-start mw9"><h1 class="dim f3 lh-solid ml0-ns mr0 mr4-l mv0 pl3 pl4-ns"><a href=https://plgd.dev/ class="link white plgd-font">plgd</a></h1><ul class="list ma0 pa0 dn dib-l"><li class="f5 dib mr4" role=menuitem><a href=/documentation/ class="dim link light-silver">Docs</a></li><li class="f5 dib mr4" role=menuitem><a href=/news/ class="dim link light-silver">News</a></li><li class="f5 dib mr4" role=menuitem><a href=https://gitter.im/ocfcloud/Lobby/ class="dim link light-silver">Community
<span class=pl1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32" class="fill-current v-base" aria-label="External Link"><path d="M25.152 16.576v5.696q0 2.144-1.504 3.648T20 27.424H5.152q-2.144.0-3.648-1.504t-1.504-3.648V7.424q0-2.112 1.504-3.616t3.648-1.536h12.576q.224.0.384.16t.16.416V4q0 .256-.16.416t-.384.16H5.152q-1.184.0-2.016.832t-.864 2.016v14.848q0 1.184.864 2.016t2.016.864H20q1.184.0 2.016-.864t.832-2.016v-5.696q0-.256.16-.416t.416-.16h1.152q.256.0.416.16t.16.416zM32 1.152v9.12q0 .48-.352.8t-.8.352-.8-.352l-3.136-3.136-11.648 11.648q-.16.192-.416.192t-.384-.192l-2.048-2.048q-.192-.16-.192-.384t.192-.416L24.064 5.088l-3.136-3.136q-.352-.352-.352-.8t.352-.8.8-.352h9.12q.48.0.8.352t.352.8z"/></svg></span></a></li><li class="f5 dib mr4" role=menuitem><a href=https://try.plgd.cloud class="dim link light-silver">Try LIVE
<span class=pl1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32" class="fill-current v-base" aria-label="External Link"><path d="M25.152 16.576v5.696q0 2.144-1.504 3.648T20 27.424H5.152q-2.144.0-3.648-1.504t-1.504-3.648V7.424q0-2.112 1.504-3.616t3.648-1.536h12.576q.224.0.384.16t.16.416V4q0 .256-.16.416t-.384.16H5.152q-1.184.0-2.016.832t-.864 2.016v14.848q0 1.184.864 2.016t2.016.864H20q1.184.0 2.016-.864t.832-2.016v-5.696q0-.256.16-.416t.416-.16h1.152q.256.0.416.16t.16.416zM32 1.152v9.12q0 .48-.352.8t-.8.352-.8-.352l-3.136-3.136-11.648 11.648q-.16.192-.416.192t-.384-.192l-2.048-2.048q-.192-.16-.192-.384t.192-.416L24.064 5.088l-3.136-3.136q-.352-.352-.352-.8t.352-.8.8-.352h9.12q.48.0.8.352t.352.8z"/></svg></span></a></li></ul><div class="db dib-ns pl3"><form id=site-search-form role=search><fieldset class="bn ma0 pa0"><label class=clip for=search-input>Search</label>
<input type=search id=search-input class="needs-js bg-left bn f5 input-reset lh-solid mt3 mt0-ns pl4 pv2 w5 white" placeholder="Search the Docs" name=search-input style="background:url(/images/icon-search.png)5px 11px/16px 16px no-repeat;background-color:rgba(255,255,255,0)"></fieldset></form></div></div></nav><main role=main class="content-with-sidebar min-vh-100 pb7 pb0-ns"><article class="w-100 ph4 pb5 pb6-ns pt1 pt5-ns"><div class=flex-l><div class="order-2 w-100 w-20-l ph5-m ph0-l mb4 sticky"><aside class="fixed-lTK mw5-l right-0 f6 bl-l b--moon-gray pv4 pv0-ns ph4-l nested-list-reset nested-links nested-copy-line-height"><p class=b>What's on this Page</p><nav id=TableOfContents><ul><li><a href=#docker-image>Docker Image</a></li><li><a href=#yaml-configuration>YAML Configuration</a><ul><li><a href=#logging>Logging</a></li><li><a href=#http-api>HTTP API</a></li><li><a href=#event-bus>Event Bus</a></li><li><a href=#grpc-gateway-client>GRPC Gateway Client</a></li><li><a href=#resource-aggregate-client>Resource Aggregate Client</a></li><li><a href=#storage>Storage</a></li><li><a href=#subscription>Subscription</a></li><li><a href=#task-queue>Task Queue</a></li></ul></li><li><a href=#api>API</a><ul><li><a href=#commands>Commands</a></li></ul></li><li><a href=#how-to-try>How to try</a><ul><li><a href=#steps>Steps</a></li><li><a href=#authorize-the-user>Authorize the User</a></li><li><a href=#request-tokens>Request Tokens</a></li><li><a href=#call-the-c2c-api>Call the C2C API</a></li><li><a href=#refresh-the-token>Refresh the token</a></li><li><a href=#device-onboarding>Device Onboarding</a></li></ul></li></ul></nav><div date-pref><a href=https://plgd.dev/configuration/cloud2cloud-connector/ class="dib f6 pl1 hover-bg-light-gray br-100" title="Cloud2Cloud Connector "><svg class="fill-current" height="30" viewBox="0 0 24 24" width="30" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"/><path d="M0 0h24v24H0z" fill="none"/></svg></a><a href=https://plgd.dev/configuration/coap-gateway/ class="dib f6 pr1 hover-bg-light-gray br-100" title="CoAP Gateway"><svg class="fill-current" height="30" viewBox="0 0 24 24" width="30" xmlns="http://www.w3.org/2000/svg"><path d="M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/><path d="M0 0h24v24H0z" fill="none"/></svg></a></div></aside></div><div class="order-1 w-60-l mw7 ph0 ph5-ns mid-gray nested-copy-line-height no-underline nested-links nested-img nested-copy-seperator nested-blockquote mt0-ns" style=flex-grow:1><div class="documentation-copy center measure-wide-l"><div id=readout class="fixed right-0 bottom-0"></div><header class="flex-none w-100"><a href=/categories/configuration class="f6 fw8 mb0 link mid-gray dim mr3">CONFIGURATION</a>
<a href=/categories/deployment class="f6 fw8 mb0 link mid-gray dim mr3">DEPLOYMENT</a><h1 class="lh-title mb3 mv0 pt3 primary-color-dark">Cloud2Cloud Gateway</h1></header><aside class="bt bw1 pt3 mt2 mid-gray b--mid-gray fn w-100"><div class="f4 fw4 lh-copy">Service configuration overview</div></aside><div class=prose id=prose><p>C2C Gateway implements <a href=https://openconnectivity.org/specs/OCF_Cloud_API_For_Cloud_Services_Specification.pdf>Open Connectivity Foundation&rsquo;s Cloud API for Cloud Services</a> providing API&rsquo;s to mirror user&rsquo;s devices to a different OCF standardized hub.</p><h2 id=docker-image>Docker Image <a class=header-link href=#docker-image><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>docker pull plgd/cloud2cloud-gateway:latest
</code></pre></div><h2 id=yaml-configuration>YAML Configuration <a class=header-link href=#yaml-configuration><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>A configuration template is available in <a href=https://github.com/plgd-dev/hub/blob/main/cloud2cloud-gateway/config.yaml>cloud2cloud-gateway/config.yaml</a>.</p><h3 id=logging>Logging <a class=header-link href=#logging><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>log.debug</code></td><td>bool</td><td><code>Set to true if you would like to see extra information in logs.</code></td><td><code>false</code></td></tr></tbody></table><h3 id=http-api>HTTP API <a class=header-link href=#http-api><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>apis.http.address</code></td><td>string</td><td><code>Listen specification &lt;host>:&lt;port> for http client connection.</code></td><td><code>"0.0.0.0:9100"</code></td></tr><tr><td><code>apis.http.tls.caPool</code></td><td>string</td><td><code>File path to the root certificate in PEM format which might contain multiple certificates in a single file.</code></td><td><code>""</code></td></tr><tr><td><code>apis.http.tls.keyFile</code></td><td>string</td><td><code>File path to private key in PEM format.</code></td><td><code>""</code></td></tr><tr><td><code>apis.http.tls.certFile</code></td><td>string</td><td><code>File path to certificate in PEM format.</code></td><td><code>""</code></td></tr><tr><td><code>apis.http.tls.clientCertificateRequired</code></td><td>bool</td><td><code>If true, require client certificate.</code></td><td><code>true</code></td></tr><tr><td><code>apis.http.authorization.authority</code></td><td>string</td><td><code>Authority is the address of the token-issuing authentication server. Services will use this URI to find and retrieve the public key that can be used to validate the tokenâ€™s signature.</code></td><td><code>""</code></td></tr><tr><td><code>apis.http.authorization.audience</code></td><td>string</td><td><code>Identifier of the API configured in your OAuth provider.</code></td><td><code>""</code></td></tr><tr><td><code>apis.http.authorization.http.maxIdleConns</code></td><td>int</td><td><code>It controls the maximum number of idle (keep-alive) connections across all hosts. Zero means no limit.</code></td><td><code>16</code></td></tr><tr><td><code>apis.http.authorization.http.maxConnsPerHost</code></td><td>int</td><td><code>It optionally limits the total number of connections per host, including connections in the dialing, active, and idle states. On limit violation, dials will block. Zero means no limit.</code></td><td><code>32</code></td></tr><tr><td><code>apis.http.authorization.http.maxIdleConnsPerHost</code></td><td>int</td><td><code>If non-zero, controls the maximum idle (keep-alive) connections to keep per-host. If zero, DefaultMaxIdleConnsPerHost is used.</code></td><td><code>16</code></td></tr><tr><td><code>apis.http.authorization.http.idleConnTimeout</code></td><td>string</td><td><code>The maximum amount of time an idle (keep-alive) connection will remain idle before closing itself. Zero means no limit.</code></td><td><code>30s</code></td></tr><tr><td><code>apis.http.authorization.http.timeout</code></td><td>string</td><td><code>A time limit for requests made by this Client. A Timeout of zero means no timeout.</code></td><td><code>10s</code></td></tr><tr><td><code>apis.http.authorization.http.tls.caPool</code></td><td>string</td><td><code>File path to the root certificate in PEM format which might contain multiple certificates in a single file.</code></td><td><code>""</code></td></tr><tr><td><code>apis.http.authorization.http.tls.keyFile</code></td><td>string</td><td><code>File path to private key in PEM format.</code></td><td><code>""</code></td></tr><tr><td><code>apis.http.authorization.http.tls.certFile</code></td><td>string</td><td><code>File path to certificate in PEM format.</code></td><td><code>""</code></td></tr><tr><td><code>apis.http.authorization.http.tls.useSystemCAPool</code></td><td>bool</td><td><code>If true, use system certification pool.</code></td><td><code>false</code></td></tr></tbody></table><h3 id=event-bus>Event Bus <a class=header-link href=#event-bus><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>plgd hub uses NATS messaging system as an event bus.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>clients.eventBus.nats.url</code></td><td>string</td><td><code>URL to nats messaging system.</code></td><td><code>"nats://localhost:4222"</code></td></tr><tr><td><code>clients.eventBus.nats.pendingLimits.msgLimit</code></td><td>int</td><td><code>Limit number of messages in queue. -1 means unlimited</code></td><td><code>524288</code></td></tr><tr><td><code>clients.eventBus.nats.pendingLimits.bytesLimit</code></td><td>int</td><td><code>Limit buffer size of queue. -1 means unlimited</code></td><td><code>67108864</code></td></tr><tr><td><code>clients.eventBus.nats.tls.caPool</code></td><td>string</td><td><code>root certificate the root certificate in PEM format.</code></td><td><code>""</code></td></tr><tr><td><code>clients.eventBus.nats.tls.keyFile</code></td><td>string</td><td><code>File name of private key in PEM format.</code></td><td><code>""</code></td></tr><tr><td><code>clients.eventBus.nats.tls.certFile</code></td><td>string</td><td><code>File name of certificate in PEM format.</code></td><td><code>""</code></td></tr><tr><td><code>clients.eventBus.nats.tls.useSystemCAPool</code></td><td>bool</td><td><code>If true, use system certification pool.</code></td><td><code>false</code></td></tr></tbody></table><h3 id=grpc-gateway-client>GRPC Gateway Client <a class=header-link href=#grpc-gateway-client><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>Client configurations to internally connect to GRPC Gateway service.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>clients.grpcGateway.grpc.address</code></td><td>string</td><td><code>GRPC Gateway service address.</code></td><td><code>"127.0.0.1:9100"</code></td></tr><tr><td><code>clients.grpcGateway.grpc.tls.caPool</code></td><td>string</td><td><code>File path to the root certificate in PEM format which might contain multiple certificates in a single file.</code></td><td><code>""</code></td></tr><tr><td><code>clients.grpcGateway.grpc.tls.keyFile</code></td><td>string</td><td><code>File path to private key in PEM format.</code></td><td><code>""</code></td></tr><tr><td><code>clients.grpcGateway.grpc.tls.certFile</code></td><td>string</td><td><code>File path to certificate in PEM format.</code></td><td><code>""</code></td></tr><tr><td><code>clients.grpcGateway.grpc.tls.useSystemCAPool</code></td><td>bool</td><td><code>If true, use system certification pool.</code></td><td><code>false</code></td></tr><tr><td><code>clients.grpcGateway.grpc.keepAlive.time</code></td><td>string</td><td><code>After a duration of this time if the client doesn't see any activity it pings the server to see if the transport is still alive.</code></td><td><code>10s</code></td></tr><tr><td><code>clients.grpcGateway.grpc.keepAlive.timeout</code></td><td>string</td><td><code>After having pinged for keepalive check, the client waits for a duration of Timeout and if no activity is seen even after that the connection is closed.</code></td><td><code>20s</code></td></tr><tr><td><code>clients.grpcGateway.grpc.keepAlive.permitWithoutStream</code></td><td>bool</td><td><code>If true, client sends keepalive pings even with no active RPCs. If false, when there are no active RPCs, Time and Timeout will be ignored and no keepalive pings will be sent.</code></td><td><code>false</code></td></tr></tbody></table><h3 id=resource-aggregate-client>Resource Aggregate Client <a class=header-link href=#resource-aggregate-client><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>Client configurations to internally connect to the Resource Aggregate service.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>clients.resourceAggregate.grpc.address</code></td><td>string</td><td><code>Resource aggregate service address.</code></td><td><code>"127.0.0.1:9100"</code></td></tr><tr><td><code>clients.resourceAggregate.grpc.keepAlive.time</code></td><td>string</td><td><code>After a duration of this time if the client doesn't see any activity it pings the server to see if the transport is still alive.</code></td><td><code>10s</code></td></tr><tr><td><code>clients.resourceAggregate.grpc.keepAlive.timeout</code></td><td>string</td><td><code>After having pinged for keepalive check, the client waits for a duration of Timeout and if no activity is seen even after that the connection is closed.</code></td><td><code>20s</code></td></tr><tr><td><code>clients.resourceAggregate.grpc.keepAlive.permitWithoutStream</code></td><td>bool</td><td><code>If true, client sends keepalive pings even with no active RPCs. If false, when there are no active RPCs, Time and Timeout will be ignored and no keepalive pings will be sent.</code></td><td><code>false</code></td></tr><tr><td><code>clients.resourceAggregate.grpc.tls.caPool</code></td><td>string</td><td><code>File path to the root certificate in PEM format which might contain multiple certificates in a single file.</code></td><td><code>""</code></td></tr><tr><td><code>clients.resourceAggregate.grpc.tls.keyFile</code></td><td>string</td><td><code>File path to private key in PEM format.</code></td><td><code>""</code></td></tr><tr><td><code>clients.resourceAggregate.grpc.tls.certFile</code></td><td>string</td><td><code>File path to certificate in PEM format.</code></td><td><code>""</code></td></tr><tr><td><code>clients.resourceAggregate.grpc.tls.useSystemCAPool</code></td><td>bool</td><td><code>If true, use system certification pool.</code></td><td><code>false</code></td></tr></tbody></table><h3 id=storage>Storage <a class=header-link href=#storage><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>plgd hub uses MongoDB database as the owner&rsquo;s device store.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>clients.storage.mongoDB.uri</code></td><td>string</td><td><code>URI to mongo database.</code></td><td><code>"mongodb://localhost:27017"</code></td></tr><tr><td><code>clients.storage.mongoDB.database</code></td><td>string</td><td><code>Name of database.</code></td><td><code>"cloud2cloudGateway"</code></td></tr><tr><td><code>clients.storage.mongoDB.maxPoolSize</code></td><td>int</td><td><code>Limits number of connections.</code></td><td><code>16</code></td></tr><tr><td><code>clients.storage.mongoDB.maxConnIdleTime</code></td><td>string</td><td><code>Close connection when idle time reach the value.</code></td><td><code>4m</code></td></tr><tr><td><code>clients.storage.mongoDB.tls.caPool</code></td><td>string</td><td><code>File path to the root certificate in PEM format which might contain multiple certificates in a single file.</code></td><td><code>""</code></td></tr><tr><td><code>clients.storage.mongoDB.tls.keyFile</code></td><td>string</td><td><code>File path to private key in PEM format.</code></td><td><code>""</code></td></tr><tr><td><code>clients.storage.mongoDB.tls.certFile</code></td><td>string</td><td><code>File path to certificate in PEM format.</code></td><td><code>""</code></td></tr><tr><td><code>clients.storage.mongoDB.tls.useSystemCAPool</code></td><td>bool</td><td><code>If true, use system certification pool.</code></td><td><code>false</code></td></tr></tbody></table><h3 id=subscription>Subscription <a class=header-link href=#subscription><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>clients.subscription.http.reconnectInterval</code></td><td>string</td><td><code>try to reconnect after interval to resource-directory when connection was closed</code></td><td><code>"10s"</code></td></tr><tr><td><code>clients.subscription.http.emitEventTimeout</code></td><td>string</td><td><code>timeout for send event</code></td><td><code>"5s"</code></td></tr><tr><td><code>clients.subscription.http.tls.caPool</code></td><td>string</td><td><code>File path to the root certificate in PEM format which might contain multiple certificates in a single file.</code></td><td><code>""</code></td></tr><tr><td><code>clients.subscription.http.tls.keyFile</code></td><td>string</td><td><code>File path to private key in PEM format.</code></td><td><code>""</code></td></tr><tr><td><code>clients.subscription.http.tls.certFile</code></td><td>string</td><td><code>File path to certificate in PEM format.</code></td><td><code>""</code></td></tr><tr><td><code>clients.subscription.http.tls.useSystemCAPool</code></td><td>bool</td><td><code>If true, use system certification pool.</code></td><td><code>false</code></td></tr></tbody></table><h3 id=task-queue>Task Queue <a class=header-link href=#task-queue><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td><code>taskQueue.goPoolSize</code></td><td>int</td><td><code>Maximum number of running goroutine instances.</code></td><td><code>1600</code></td></tr><tr><td><code>taskQueue.size</code></td><td>int</td><td><code>Size of queue. If it exhausted, submit returns error.</code></td><td><code>2097152</code></td></tr><tr><td><code>taskQueue.maxIdleTime</code></td><td>string</td><td><code>Sets up the interval time of cleaning up goroutines. Zero means never cleanup.</code></td><td><code>10m</code></td></tr></tbody></table><blockquote><p>Note that the string type related to time (i.e. timeout, idleConnTimeout, expirationTime) is decimal numbers, each with optional fraction and a unit suffix, such as &ldquo;300ms&rdquo;, &ldquo;1.5h&rdquo; or &ldquo;2h45m&rdquo;. Valid time units are &ldquo;ns&rdquo;, &ldquo;us&rdquo;, &ldquo;ms&rdquo;, &ldquo;s&rdquo;, &ldquo;m&rdquo;, &ldquo;h&rdquo;.</p></blockquote><h2 id=api>API <a class=header-link href=#api><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Follow <a href=https://openconnectivity.org/specs/OCF_Cloud_API_For_Cloud_Services_Specification_v2.2.0.pdf>OCF Cloud API For Cloud Services Specification</a></p><h3 id=commands>Commands <a class=header-link href=#commands><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><ul><li>get all devices</li><li>get the device by ID</li><li>retrieve / update resource values</li><li>subscribe to / unsubscribe from events against the set of devices</li><li>subscribe to / unsubscribe from events against a specific device</li><li>subscribe to / unsubscribe from events against a specific resource</li><li><a href="https://petstore.swagger.io/?url=https://raw.githubusercontent.com/openconnectivityfoundation/core-extensions/ocfcloud-openapi/swagger2.0/oic.r.cloudopenapi.swagger.json">swagger</a></li></ul><h2 id=how-to-try>How to try <a class=header-link href=#how-to-try><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><h3 id=steps>Steps <a class=header-link href=#steps><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><ol><li>Authorize the user: Request the user&rsquo;s authorization and redirect back to your application with an authorization code.</li><li>Request tokens: Exchange your authorization code for tokens.</li><li>Call your API: Use the retrieved Access Token to call your API.</li><li>Refresh Tokens: Use a Refresh Token to request new tokens when the existing ones expire.</li></ol><h3 id=authorize-the-user>Authorize the User <a class=header-link href=#authorize-the-user><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><ul><li>Authenticating the user;</li><li>Redirecting the user to an Identity Provider to handle authentication;</li><li>Checking for active Single Sign-on (SSO) sessions;</li><li>Obtaining user consent for the requested permission level, unless consent has been previously given.</li></ul><p>To authorize the user, your app must send the user to the authorization URL.</p><h4 id=authorize-with-tryplgdcloud>Authorize with try.plgd.cloud <a class=header-link href=#authorize-with-tryplgdcloud><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h4><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>https://auth.plgd.cloud/authorize?
    <span class=nv>response_type</span><span class=o>=</span>code<span class=p>&amp;</span>
    <span class=nv>client_id</span><span class=o>=</span>9XjK2mCf2J0or4Ko0ow7wCmZeDTjC1mW<span class=p>&amp;</span>
    <span class=nv>redirect_uri</span><span class=o>=</span>http://localhost:8080/callback<span class=p>&amp;</span>
    <span class=nv>scope</span><span class=o>=</span>r:deviceinformation:* r:resources:* w:resources:* w:subscriptions:* offline_access<span class=p>&amp;</span>
    <span class=nv>audience</span><span class=o>=</span>https://openapi.try.plgd.cloud/<span class=p>&amp;</span>
    <span class=nv>state</span><span class=o>=</span>STATE
</code></pre></div><p>If all goes well, you&rsquo;ll receive an HTTP 302 response. The authorization code is included at the end of the URL:</p><pre><code class=language-url data-lang=url>http://localhost:8080/callback?code=s65bpdt-ry7QEh6O&amp;state=STATE
</code></pre><h3 id=request-tokens>Request Tokens <a class=header-link href=#request-tokens><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>Now that you have an Authorization Code, you must exchange it for tokens. Using the extracted Authorization Code (code) from the previous step, you will need to POST to the token URL.</p><h4 id=request-tokens-with-tryplgdcloud>Request Tokens with try.plgd.cloud <a class=header-link href=#request-tokens-with-tryplgdcloud><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h4><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>curl --request POST <span class=se>\
</span><span class=se></span>  --url <span class=s1>&#39;https://auth.plgd.cloud/oauth/token&#39;</span> <span class=se>\
</span><span class=se></span>  --header <span class=s1>&#39;content-type: application/x-www-form-urlencoded&#39;</span> <span class=se>\
</span><span class=se></span>  --data <span class=nv>grant_type</span><span class=o>=</span>authorization_code <span class=se>\
</span><span class=se></span>  --data <span class=s1>&#39;client_id=9XjK2mCf2J0or4Ko0ow7wCmZeDTjC1mW&#39;</span> <span class=se>\
</span><span class=se></span>  --data <span class=nv>client_secret</span><span class=o>=</span>UTeeIsSugTuDNbn4QMdBaNLDnMiBQzQaa6elm4SDuWOdZUou-aH00EPSbBhgppFD <span class=se>\
</span><span class=se></span>  --data <span class=nv>code</span><span class=o>={</span>YOUR_AUTHORIZATION_CODE<span class=o>}</span> <span class=se>\
</span><span class=se></span>  --data <span class=s1>&#39;redirect_uri=http://localhost:8080/callback&#39;</span>
</code></pre></div><p>If all goes well, you&rsquo;ll receive an HTTP 200 response with a payload containing access_token, refresh_token, scope, expires_in and token_type values:</p><div class=highlight><pre class=chroma><code class=language-json data-lang=json><span class=p>{</span>
  <span class=nt>&#34;access_token&#34;</span><span class=p>:</span><span class=s2>&#34;ey...ojg&#34;</span><span class=p>,</span>
  <span class=nt>&#34;refresh_token&#34;</span><span class=p>:</span><span class=s2>&#34;pL...btL&#34;</span><span class=p>,</span>
  <span class=nt>&#34;scope&#34;</span><span class=p>:</span><span class=s2>&#34;r:deviceinformation:* r:resources:* w:resources:* w:subscriptions:* offline_access&#34;</span><span class=p>,</span>
  <span class=nt>&#34;expires_in&#34;</span><span class=p>:</span><span class=mi>86400</span><span class=p>,</span>
  <span class=nt>&#34;token_type&#34;</span><span class=p>:</span><span class=s2>&#34;Bearer&#34;</span>
<span class=p>}</span>
</code></pre></div><h3 id=call-the-c2c-api>Call the C2C API <a class=header-link href=#call-the-c2c-api><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>To call the C2C API as an authorized user, the application must pass the retrieved Access Token as a Bearer token in the Authorization header of your HTTP request.</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>curl --request GET <span class=se>\
</span><span class=se></span>  --url https://openapi.try.plgd.cloud/api/v1/devices <span class=se>\
</span><span class=se></span>  --header <span class=s1>&#39;authorization: Bearer eyJ...lojg&#39;</span> <span class=se>\
</span><span class=se></span>  --header <span class=s1>&#39;content-type: application/json&#39;</span> <span class=se>\
</span><span class=se></span>  --header <span class=s1>&#39;accept: application/json&#39;</span>
</code></pre></div><h3 id=refresh-the-token>Refresh the token <a class=header-link href=#refresh-the-token><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>You can use the Refresh Token to get a new Access Token. The application communicating with the C2C Endpoint needs a new Access Token only after the previous one expires. It&rsquo;s bad practice to call the endpoint to get a new Access Token every time you call an API, and pluggedin.cloud maintains rate limits that will throttle the amount of requests to the endpoint that can be executed using the same token from the same IP.</p><p>To refresh your token, make a POST request to the token endpoint, using grant_type=refresh_token.</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>curl --request POST <span class=se>\
</span><span class=se></span>  --url <span class=s1>&#39;https://auth.plgd.cloud/oauth/token&#39;</span> <span class=se>\
</span><span class=se></span>  --header <span class=s1>&#39;content-type: application/x-www-form-urlencoded&#39;</span> <span class=se>\
</span><span class=se></span>  --data <span class=nv>grant_type</span><span class=o>=</span>refresh_token <span class=se>\
</span><span class=se></span>  --data <span class=s1>&#39;client_id=9XjK2mCf2J0or4Ko0ow7wCmZeDTjC1mW&#39;</span> <span class=se>\
</span><span class=se></span>  --data <span class=nv>refresh_token</span><span class=o>={</span>YOUR_REFRESH_TOKEN<span class=o>}</span>
</code></pre></div><blockquote><p>Now you&rsquo;re able to authorize the user, request the token, communicate with the C2C API and refresh the token before it expires.</p></blockquote><h3 id=device-onboarding>Device Onboarding <a class=header-link href=#device-onboarding><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>To be able to see the devices through the <code>try.plgd.cloud</code> C2C API, first you need to onboard the device. When you have your device ready, go to the <code>https://plgd.dev</code> website and click <code>Try Live</code>. This redirects you to the <code>try.plgd.cloud Portal</code>.</p><p>First thing you need is an authorization code. In the <code>try.plgd.cloud Portal</code> go to <code>Devices</code> and click <code>Onboard Device</code>. This displays you the code needed to onboard the device. Values which should be set to the <a href=https://github.com/openconnectivityfoundation/cloud-services/blob/c2c/swagger2.0/oic.r.coapcloudconf.swagger.json>coapcloudconf</a> device resource are:</p><h4 id=unsecured-device>Unsecured device <a class=header-link href=#unsecured-device><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h4><ul><li><code>apn</code> : <code>plgd</code></li><li><code>cis</code> : <code>coap+tcp://try.plgd.cloud:5683</code></li><li><code>sid</code> : <code>adebc667-1f2b-41e3-bf5c-6d6eabc68cc6</code></li><li><code>at</code> : <code>CODE_FROM_PORTAL</code></li></ul><h4 id=secured-device>Secured device <a class=header-link href=#secured-device><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h4><ul><li><code>apn</code> : <code>plgd</code></li><li><code>cis</code> : <code>coaps+tcp://try.plgd.cloud:5684</code></li><li><code>sid</code> : <code>adebc667-1f2b-41e3-bf5c-6d6eabc68cc6</code></li><li><code>at</code> : <code>CODE_FROM_PORTAL</code></li></ul><p>Conditions:</p><ul><li><code>Device must be owned.</code></li><li><code>Cloud CA must be set as TRUST CA with subject adebc667-1f2b-41e3-bf5c-6d6eabc68cc6 in device.</code></li><li><code>Cloud CA in PEM:</code></li></ul><pre><code class=language-pem data-lang=pem>-----BEGIN CERTIFICATE-----
MIIBhDCCASmgAwIBAgIQdAMxveYP9Nb48xe9kRm3ajAKBggqhkjOPQQDAjAxMS8w
LQYDVQQDEyZPQ0YgQ2xvdWQgUHJpdmF0ZSBDZXJ0aWZpY2F0ZXMgUm9vdCBDQTAe
Fw0xOTExMDYxMjAzNTJaFw0yOTExMDMxMjAzNTJaMDExLzAtBgNVBAMTJk9DRiBD
bG91ZCBQcml2YXRlIENlcnRpZmljYXRlcyBSb290IENBMFkwEwYHKoZIzj0CAQYI
KoZIzj0DAQcDQgAEaNJi86t5QlZiLcJ7uRMNlcwIpmFiJf9MOqyz2GGnGVBypU6H
lwZHY2/l5juO/O4EH2s9h3HfcR+nUG2/tFzFEaMjMCEwDgYDVR0PAQH/BAQDAgEG
MA8GA1UdEwEB/wQFMAMBAf8wCgYIKoZIzj0EAwIDSQAwRgIhAM7gFe39UJPIjIDE
KrtyPSIGAk0OAO8txhow1BAGV486AiEAqszg1fTfOHdE/pfs8/9ZP5gEVVkexRHZ
JCYVaa2Spbg=
-----END CERTIFICATE-----
</code></pre><ul><li><code>ACL for Cloud (Subject: adebc667-1f2b-41e3-bf5c-6d6eabc68cc6) must be set with full access to all published resources in device.</code></li></ul></div><h2>See Also</h2><ul><li><a href=/configuration/identity-store/>Identity Store</a></li><li><a href=/configuration/certificate-authority/>Certificate Authority</a></li><li><a href=/configuration/cloud2cloud-connector/>Cloud2Cloud Connector</a></li><li><a href=/configuration/coap-gateway/>CoAP Gateway</a></li><li><a href=/configuration/http-gateway/>HTTP Gateway</a></li></ul></div></div><div class="order-0 w-20 dn db-l"><nav role=navigation><ul class="list pa0 nl2"><li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8"><a href=javascript:void(0) class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pv2" data-target=.introduction>Introduction</a><ul class="introduction desktopmenu animated fadeIn list pl0 bg-light-gray dn"><li class="f6 fw4"><a href=/introduction/what-is-plgd/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">What is plgd</a></li><li class="f6 fw4"><a href=/introduction/who-we-are/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">Who we are</a></li><li class="f6 fw4"><a href=/introduction/compare-plgd/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">Compare plgd</a></li><li class="f6 fw4"><a href=/introduction/faq/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">FAQ</a></li></ul></li><li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8 mb1 bb b--moon-gray"><a href=javascript:void(0) class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pv2" data-target=.quickstart>Quickstart</a><ul class="quickstart desktopmenu animated fadeIn list pl0 bg-light-gray dn"><li class="f6 fw4"><a href=/quickstart/contribute/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">Contribute</a></li><li class="f6 fw4"><a href=/quickstart/create-device/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">Create device</a></li><li class="f6 fw4"><a href=/quickstart/device-to-device/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">Discover & control device locally</a></li><li class="f6 fw4"><a href=/quickstart/device-to-hub/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">Control device remotely</a></li><li class="f6 fw4"><a href=/quickstart/deploy-plgd-hub/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">Deploy your own plgd hub</a></li><li class="f6 fw4"><a href=/quickstart/create-plgd-app/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">Create first plgd application</a></li></ul></li><li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8"><a href=javascript:void(0) class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pv2" data-target=.features>Features</a><ul class="features desktopmenu animated fadeIn list pl0 bg-light-gray dn"><li class="f6 fw4"><a href=/features/audit-log/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">Audit Log</a></li><li class="f6 fw4"><a href=/features/pending-command/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">Pending command</a></li><li class="f6 fw4"><a href=/features/provisioning/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">Device Provisioning</a></li><li class="f6 fw4"><a href=/features/device-shadow/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">Device Shadow</a></li><li class="f6 fw4"><a href=/features/disaster-recovery/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">Disaster Recovery</a></li><li class="f6 fw4"><a href=/features/jetstream/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">JetStream</a></li></ul></li><li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8"><a href=javascript:void(0) class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pv2" data-target=.architecture>Architecture</a><ul class="architecture desktopmenu animated fadeIn list pl0 bg-light-gray dn"><li class="f6 fw4"><a href=/architecture/introduction/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">Domain Overview</a></li><li class="f6 fw4"><a href=/architecture/component-overview/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">Component Overview</a></li><li class="f6 fw4"><a href=/architecture/system-overview/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">System Overview</a></li></ul></li><li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8"><a href=javascript:void(0) class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pv2 primary-color" data-target=.configuration>Configuration</a><ul class="configuration desktopmenu animated fadeIn list pl0 bg-light-gray db"><li class="f6 fw4"><a href=/configuration/coap-gateway/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">CoAP Gateway</a></li><li class="f6 fw4"><a href=/configuration/grpc-gateway/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">gRPC Gateway</a></li><li class="f6 fw4"><a href=/configuration/http-gateway/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">HTTP Gateway</a></li><li class="f6 fw4"><a href=/configuration/resource-aggregate/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">Resource Aggregate</a></li><li class="f6 fw4"><a href=/configuration/resource-directory/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">Resource Directory</a></li><li class="f6 fw4"><a href=/configuration/identity-store/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">Identity Store</a></li><li class="f6 fw4"><a href=/configuration/cloud2cloud-gateway/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 primary-color">Cloud2Cloud Gateway</a></li><li class="f6 fw4"><a href=/configuration/cloud2cloud-connector/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">Cloud2Cloud Connector</a></li><li class="f6 fw4"><a href=/configuration/certificate-authority/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">Certificate Authority</a></li><li class="f6 fw4"><a href=/configuration/oauth-server/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">[MOCK] OAuth Server</a></li></ul></li><li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8"><a href=javascript:void(0) class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pv2" data-target=.deployment>Deployment</a><ul class="deployment desktopmenu animated fadeIn list pl0 bg-light-gray dn"><li class="f6 fw4"><a href=/deployment/k8s/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">plgd on K8S</a></li></ul></li><li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8 mb1 bb b--moon-gray"><a href=/device-library/ class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pv2" data-target=.device-library>Device Library</a></li><li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8 mb1 bb b--moon-gray"><a href=javascript:void(0) class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pv2" data-target=.tutorials>Tutorials</a><ul class="tutorials desktopmenu animated fadeIn list pl0 bg-light-gray dn"><li class="f6 fw4"><a href=/tutorials/external-oauth-server/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">External OAuth Server with bundle</a></li><li class="f6 fw4"><a href=/tutorials/shared-ownership/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">Share devices within user groups</a></li><li class="f6 fw4"><a href=/tutorials/dashboard-branding/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">Branding dashboard</a></li><li class="f6 fw4"><a href=/tutorials/working-with-grpc-client/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">Working with gRPC Client</a></li><li class="f6 fw4"><a href=/tutorials/create-delete-device-resources/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">Create & Delete device resources</a></li><li class="f6 fw4"><a href=/tutorials/advanced-security/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">Advanced security</a></li><li class="f6 fw4"><a href=/tutorials/developing-dashboard/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">Dashboard</a></li><li class="f6 fw4"><a href=/tutorials/testing/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">Testing</a></li><li class="f6 fw4"><a href=/tutorials/ocf-conformance-testing/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">OCF Conformance Testing</a></li></ul></li><li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8"><a href=javascript:void(0) class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pv2" data-target=.device-provisioning-service>Device Provisioning Service</a><ul class="device-provisioning-service desktopmenu animated fadeIn list pl0 bg-light-gray dn"><li class="f6 fw4"><a href=/device-provisioning-service/overview/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">Overview</a></li></ul></li></ul></nav></div></div></article><div class="w-100 bg-light-gray"><div class="mw7 pa4 center nested-lh-copy lh-copy"><h6 class="f4 dark-gray mb2"><a href=https://plgd.dev/configuration/cloud2cloud-gateway/ class="hide-child link primary-color"><span class="nl3 child"><svg class="grow" height="14" viewBox="0 0 24 24" width="14" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></span>â€œCloud2Cloud Gatewayâ€</a> was last updated: February 2, 2022: <a class="hide-child link primary-color" href=https://github.com/plgd-dev/hub/commit/6ba0d148ee8669430f5a500953670a3e7ca54864>mongodb config: add maxPoolSize, maxConnIdleTime (6ba0d14)</a></h6><a href=https://github.com/plgd-dev/hub/edit/master/content/en/configuration/cloud2cloud-gateway.md class="f6 ph3 pv1 br2 dib tc ttu mv3 bg-primary-color white hover-bg-green link">Improve this page</a></div></div></main><footer class="bg-primary-color-dark ph4-ns pt4 relative w-100" role=contentinfo><div class="center flex-ns flex-wrap justify-between mw9 w-90"><div class="pb3 pt1 center"><div class="center w4"><img src=/images/plgd-logo-short-white.svg alt="plgd Logo"></div><ul class="center f6 list ma0 mv3 pa0 tc"><li class="dib mr3"><a href=https://github.com/plgd-dev/hub/issues/new/ class="dim link light-gray pv2">File an Issue</a></li><li class="dib mr3"><a href=https://gitter.im/ocfcloud/Lobby class="dim link light-gray pv2">Discuss Source Code</a></li><li class=dib><a href=https://try.plgd.cloud class="dim link light-gray pv2">Try plgd hub</a></li></ul><div class="center f7 gray tc">Â <p class=dib>Â© plgd.dev 2018â€“2022</p></div></div></div><div class="bg-primary-color-dark bottom-0 left-0 right-0 dn-l fixed pb3 ph3 pt3 w-100"><div class="globalmenu mobilemenu pb1 dn"><ul class="list hidden dib ph0 scrolling-touch tc"><li class="tl dib ma0 hover-bg-black w-100"><a href=/documentation/ class="ttu f6 link primary-color-light overflow hover-white db brand-font ma0 w-100 pv3 ph4">Docs</a></li><li class="tl dib ma0 hover-bg-black w-100"><a href=/news/ class="ttu f6 link primary-color-light overflow hover-white db brand-font ma0 w-100 pv3 ph4">News</a></li><li class="tl dib ma0 hover-bg-black w-100"><a href=https://gitter.im/ocfcloud/Lobby/ class="ttu f6 link primary-color-light overflow hover-white db brand-font ma0 w-100 pv3 ph4">Community</a></li><li class="tl dib ma0 hover-bg-black w-100"><a href=https://try.plgd.cloud class="ttu f6 link primary-color-light overflow hover-white db brand-font ma0 w-100 pv3 ph4">Try LIVE</a></li></ul></div><div class="docsmenu mobilemenu pb1 dn"><ul class="list dib ph0 scrolling-touch tc"><li class="tl dib ma0 hover-bg-black w-100"><a href=/introduction/ class="ttu f6 link primary-color-light hover-white db brand-font mb1 ma0 w-100 pv2 ph4">Introduction</a></li><li class="tl dib ma0 hover-bg-black w-100 mb2 bb b--mid-gray"><a href=/quickstart/ class="ttu f6 link primary-color-light hover-white db brand-font mb1 ma0 w-100 pv2 ph4">Quickstart</a></li><li class="tl dib ma0 hover-bg-black w-100"><a href=/features/ class="ttu f6 link primary-color-light hover-white db brand-font mb1 ma0 w-100 pv2 ph4">Features</a></li><li class="tl dib ma0 hover-bg-black w-100"><a href=/architecture/ class="ttu f6 link primary-color-light hover-white db brand-font mb1 ma0 w-100 pv2 ph4">Architecture</a></li><li class="tl dib ma0 hover-bg-black w-100"><a href=/configuration/ class="ttu f6 link primary-color-light hover-white db brand-font mb1 ma0 w-100 pv2 ph4">Configuration</a></li><li class="tl dib ma0 hover-bg-black w-100"><a href=/deployment/ class="ttu f6 link primary-color-light hover-white db brand-font mb1 ma0 w-100 pv2 ph4">Deployment</a></li><li class="tl dib ma0 hover-bg-black w-100 mb2 bb b--mid-gray"><a href=/device-library/ class="ttu f6 link primary-color-light hover-white db brand-font mb1 ma0 w-100 pv2 ph4">Device Library</a></li><li class="tl dib ma0 hover-bg-black w-100 mb2 bb b--mid-gray"><a href=/tutorials/ class="ttu f6 link primary-color-light hover-white db brand-font mb1 ma0 w-100 pv2 ph4">Tutorials</a></li><li class="tl dib ma0 hover-bg-black w-100"><a href=/device-provisioning-service/ class="ttu f6 link primary-color-light hover-white db brand-font mb1 ma0 w-100 pv2 ph4">Device Provisioning Service</a></li></ul></div><div class="flex dn-l justify-between"><button class="js-toggle flex-auto dib dn-l f6 tc db ph3 pv2 link mr2 white bg-primary-color-dark hover-bg-primary-color ba b--white-40 w-auto" data-target=.globalmenu>Menu</button>
<button class="js-toggle flex-auto dib dn-l f6 tc db ph3 pv2 link white bg-primary-color-dark hover-bg-primary-color ba b--white-40 w-auto" data-target=.docsmenu>Docs Menu</button></div></div></footer></body></html>