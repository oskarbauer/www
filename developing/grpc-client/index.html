<!doctype html><html class=no-js lang=en-us><head><meta charset=utf-8><link rel=preload href=https://next.plgd.dev/fonts/muli-latin-200.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=https://next.plgd.dev/fonts/muli-latin-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=https://next.plgd.dev/fonts/muli-latin-800.woff2 as=font type=font/woff2 crossorigin><meta http-equiv=x-ua-compatible content="IE=edge"><title>gRPC Client | plgd</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=generator content="Hugo 0.81.0"><meta name=robots content="noindex, nofollow"><link rel=stylesheet href=/output/css/app.min.d420dda6314fb0c7f11529fb5d0b7f8da3f760a48238455d45ad48100e4bb05c.css integrity="sha256-1CDdpjFPsMfxFSn7XQt/jaP3YKSCOEVdRa1IEA5LsFw=" crossorigin=anonymous><meta name=description content="How to handle Markdown and other markup related configuration."><script type=text/javascript src=/output/js/app.175b405753a9c0ce86ab35944e9c4cc1a758a6873209cf5106600f6b2f5a59b6.js integrity="sha256-F1tAV1OpwM6GqzWUTpxMwadYpocyCc9RBmAPay9aWbY=" crossorigin=anonymous defer></script><script async defer src=https://buttons.github.io/buttons.js></script><script src=/js/particles.js></script><script src=/js/medium-zoom.min.js></script><script src=/js/rawdeflate.js></script><script>window.addEventListener('load',a=>{mediumZoom(document.querySelectorAll('.medium-zoom-image'))})</script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png href=/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicon-16x16.png sizes=16x16><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#0594cb><meta name=theme-color content="#ffffff"><meta property="og:title" content="gRPC Client"><meta property="og:description" content="How to handle Markdown and other markup related configuration."><meta property="og:type" content="article"><meta property="og:url" content="https://next.plgd.dev/developing/grpc-client/"><meta property="og:image" content="https://next.plgd.dev/images/plgd-logo-full-white.png"><meta property="article:section" content="developing"><meta property="article:published_time" content="2019-11-15T00:00:00+00:00"><meta property="article:modified_time" content="2021-05-13T21:48:22+02:00"><meta itemprop=name content="gRPC Client"><meta itemprop=description content="How to handle Markdown and other markup related configuration."><meta itemprop=datePublished content="2019-11-15T00:00:00+00:00"><meta itemprop=dateModified content="2021-05-13T21:48:22+02:00"><meta itemprop=wordCount content="691"><meta itemprop=image content="https://next.plgd.dev/images/plgd-logo-full-white.png"><meta itemprop=keywords content><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://next.plgd.dev/images/plgd-logo-full-white.png"><meta name=twitter:title content="gRPC Client"><meta name=twitter:description content="How to handle Markdown and other markup related configuration."></head><body class="ma0 sans-serif bg-primary-color-light"><nav class="bg-primary-color-dark pv4 w-100" role=navigation><div class="center flex-ns flex-wrap items-center justify-start mw9"><h1 class="dim f3 lh-solid ml0-ns mr0 mr4-l mv0 pl3 pl4-ns"><a href=https://plgd.dev/ class="link white plgd-font">plgd</a></h1><ul class="list ma0 pa0 dn dib-l"><li class="f5 dib mr4" role=menuitem><a href=/documentation/ class="dim link light-silver">Docs</a></li><li class="f5 dib mr4" role=menuitem><a href=/news/ class="dim link light-silver">News</a></li><li class="f5 dib mr4" role=menuitem><a href=https://gitter.im/ocfcloud/Lobby/ class="dim link light-silver">Community
<span class=pl1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32" class="fill-current v-base" aria-label="External Link"><path d="M25.152 16.576v5.696q0 2.144-1.504 3.648T20 27.424H5.152q-2.144.0-3.648-1.504t-1.504-3.648V7.424q0-2.112 1.504-3.616t3.648-1.536h12.576q.224.0.384.16t.16.416V4q0 .256-.16.416t-.384.16H5.152q-1.184.0-2.016.832t-.864 2.016v14.848q0 1.184.864 2.016t2.016.864H20q1.184.0 2.016-.864t.832-2.016v-5.696q0-.256.16-.416t.416-.16h1.152q.256.0.416.16t.16.416zM32 1.152v9.12q0 .48-.352.8t-.8.352-.8-.352l-3.136-3.136-11.648 11.648q-.16.192-.416.192t-.384-.192l-2.048-2.048q-.192-.16-.192-.384t.192-.416L24.064 5.088l-3.136-3.136q-.352-.352-.352-.8t.352-.8.8-.352h9.12q.48.0.8.352t.352.8z"/></svg></span></a></li><li class="f5 dib mr4" role=menuitem><a href=https://try.plgd.cloud class="dim link light-silver">Try LIVE
<span class=pl1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32" class="fill-current v-base" aria-label="External Link"><path d="M25.152 16.576v5.696q0 2.144-1.504 3.648T20 27.424H5.152q-2.144.0-3.648-1.504t-1.504-3.648V7.424q0-2.112 1.504-3.616t3.648-1.536h12.576q.224.0.384.16t.16.416V4q0 .256-.16.416t-.384.16H5.152q-1.184.0-2.016.832t-.864 2.016v14.848q0 1.184.864 2.016t2.016.864H20q1.184.0 2.016-.864t.832-2.016v-5.696q0-.256.16-.416t.416-.16h1.152q.256.0.416.16t.16.416zM32 1.152v9.12q0 .48-.352.8t-.8.352-.8-.352l-3.136-3.136-11.648 11.648q-.16.192-.416.192t-.384-.192l-2.048-2.048q-.192-.16-.192-.384t.192-.416L24.064 5.088l-3.136-3.136q-.352-.352-.352-.8t.352-.8.8-.352h9.12q.48.0.8.352t.352.8z"/></svg></span></a></li></ul><div class="db dib-ns pl3"><form id=site-search-form role=search><fieldset class="bn ma0 pa0"><label class=clip for=search-input>Search</label>
<input type=search id=search-input class="needs-js bg-left bn f5 input-reset lh-solid mt3 mt0-ns pl4 pv2 w5 white" placeholder="Search the Docs" name=search-input style="background:url(/images/icon-search.png)no-repeat 0 8px/16px 16px"></fieldset></form></div></div></nav><main role=main class="content-with-sidebar min-vh-100 pb7 pb0-ns"><article class="w-100 ph4 pb5 pb6-ns pt1 pt5-ns"><div class=flex-l><div class="order-2 w-100 w-20-l ph5-m ph0-l mb4 sticky"><aside class="fixed-lTK mw5-l right-0 f6 bl-l b--moon-gray pv4 pv0-ns ph4-l nested-list-reset nested-links nested-copy-line-height"><p class=b>What's on this Page</p><nav id=TableOfContents><ul><li><a href=#what-it-grpc>What it GRPC</a></li><li><a href=#how-to-create-grpc-client-for-grpc-gateway>How to create GRPC client for grpc-gateway</a><ul><li><a href=#api>API</a></li><li><a href=#get-devices>Get Devices</a></li><li><a href=#get-resource-links>Get Resource Links</a></li><li><a href=#retrieve-resource-content>Retrieve Resource Content</a></li><li><a href=#subscribe-to-events>Subscribe to Events</a></li><li><a href=#retrieve-resource-from-device>Retrieve Resource from Device</a></li><li><a href=#update-resource-content>Update Resource Content</a></li><li><a href=#create-resource>Create Resource</a></li><li><a href=#delete-resource>Delete Resource</a></li><li><a href=#go-lang-grpc-client>Go-Lang GRPC client</a></li><li><a href=#creating-client>Creating client</a></li><li><a href=#using-extended-grpc-client>Using extended grpc client</a></li></ul></li></ul></nav><div date-pref><a href=https://next.plgd.dev/developing/dashboard/ class="dib f6 pl1 hover-bg-light-gray br-100" title="Dashboard "><svg class="fill-current" height="30" viewBox="0 0 24 24" width="30" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"/><path d="M0 0h24v24H0z" fill="none"/></svg></a><a href=https://next.plgd.dev/developing/resources/ class="dib f6 pr1 hover-bg-light-gray br-100" title=Resources><svg class="fill-current" height="30" viewBox="0 0 24 24" width="30" xmlns="http://www.w3.org/2000/svg"><path d="M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/><path d="M0 0h24v24H0z" fill="none"/></svg></a></div></aside></div><div class="order-1 w-60-l mw7 ph0 ph5-ns mid-gray nested-copy-line-height no-underline nested-links nested-img nested-copy-seperator nested-blockquote mt0-ns" style=flex-grow:1><div class="documentation-copy center measure-wide-l"><div id=readout class="fixed right-0 bottom-0"></div><header class="flex-none w-100"><a href=/categories/getting-started class="f6 fw8 mb0 link mid-gray dim mr3">GETTING STARTED</a>
<a href=/categories/fundamentals class="f6 fw8 mb0 link mid-gray dim mr3">FUNDAMENTALS</a><h1 class="lh-title mb3 mv0 pt3 primary-color-dark">gRPC Client</h1></header><aside class="bt bw1 pt3 mt2 mid-gray b--mid-gray fn w-100"><div class="f4 fw4 lh-copy">How to handle Markdown and other markup related configuration.</div></aside><div class=prose id=prose><h1 id=working-with-grpc-client>Working with GRPC Client</h1><h2 id=what-it-grpc>What it GRPC <a class=header-link href=#what-it-grpc><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>Please follow <a href=https://grpc.io/docs/what-is-grpc/introduction/>link</a></p><h2 id=how-to-create-grpc-client-for-grpc-gateway>How to create GRPC client for grpc-gateway <a class=header-link href=#how-to-create-grpc-client-for-grpc-gateway><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h2><p>For creating grpc-client you need to generate a code for your language from proto files, which are stored at <a href=https://github.com/plgd-dev/cloud/tree/v2/grpc-gateway/pb>cloud</a>.</p><h3 id=api>API <a class=header-link href=#api><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>All requests to service must contains valid access token in <a href=https://github.com/grpc/grpc-go/blob/master/Documentation/grpc-auth-support.md#oauth2>grpc metadata</a>.</p><p>::: warning
Each request to the gRPC Gateway shall contain a valid access token as a part of the <a href=https://github.com/grpc/grpc-go/blob/master/Documentation/grpc-auth-support.md#oauth2>grpc metadata</a>.
:::</p><h3 id=get-devices>Get Devices <a class=header-link href=#get-devices><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>The <code>GetDevices</code> command supports various filter options. If all of them are <strong>unset</strong>, all devices of a user identified by the access token are returned.</p><p><strong>Example usages of filter options:</strong></p><ul><li>to retrieve certain devices use <code>GetDevicesRequest.device_ids_filter</code> where ids of these devices needs to be set</li><li>to retrieve all offline devices set <code>GetDevicesRequest.status_filter</code> to <code>OFFLINE</code></li><li>to retrieve all devices of certain types use <code>GetDevicesRequest.type_filter</code> (e.g. <code>x.com.plgd.light</code>)</li></ul><p>To return only <code>ONLINE</code> devices with ids <code>deviceID1</code> and <code>deviceID2</code>, following options shall be set: <code>GetDevicesRequest.device_ids_filter("[deviceID1, deviceID2]") && GetDevicesRequest.status_filter([ONLINE])</code>.</p><h3 id=get-resource-links>Get Resource Links <a class=header-link href=#get-resource-links><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>The <code>GetResourceLinks</code> command supports various filter options. If all of them are <strong>unset</strong>, all links of all devices user is authorized to use are returned.</p><p><strong>Example usages of filter options:</strong></p><ul><li>to retrieve links of certain devices use <code>GetResourceLinksRequest.device_ids_filter</code> where ids of these devices needs to be set</li><li>to retrieve links of certain types use <code>GetResourceLinksRequest.type_filter</code> (e.g. <code>oic.r.switch.binary</code>)</li></ul><p>To return only binary switches resources hosted by devices with ids <code>deviceID1</code> and <code>deviceID2</code>, following options shall be set: <code>GetResourceLinksRequest.device_ids_filter("[deviceID1, deviceID2]") && GetResourceLinksRequest.type_filter([oic.r.switch.binary])</code>.</p><h3 id=retrieve-resource-content>Retrieve Resource Content <a class=header-link href=#retrieve-resource-content><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>The <code>RetrieveResourcesValues</code> command supports various filter options. If all of them are <strong>unset</strong>, all resource contents of all devices user is authorized to use are returned.</p><p><strong>Example usages of filter options:</strong></p><ul><li>to retrieve of resources identified by their hrefs use <code>RetrieveResourcesValuesRequest.resource_ids_filter</code> where combinations <code>deviceID</code> and <code>href</code> is required</li><li>to retrieve resource values of certain devices use <code>RetrieveResourcesValuesRequest.device_ids_filter</code> where ids of these devices needs to be set</li><li>to retrieve values from resources of a specific type use <code>RetrieveResourcesValuesRequest.type_filter</code></li></ul><p>To return values of binary switch resources hosted by devices with ids <code>deviceID1</code> and <code>deviceID2</code>, following options shall be set: <code>RetrieveResourcesValuesRequest.device_ids_filter("[deviceID1, deviceID2]") && RetrieveResourcesValuesRequest.type_filter([oic.r.switch.binary])</code>.</p><h3 id=subscribe-to-events>Subscribe to Events <a class=header-link href=#subscribe-to-events><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>The <code>SubscribeForEvents</code> command opens the stream which content is controlled by sending messages with filter options.</p><p><strong>To control what will be pushed to the stream, send a <code>SubscribeForEvents</code> message with option:</strong></p><ul><li><code>filter_by.devices_event.filter_events</code> set to e.g. <code>ONLINE</code> to receive <strong>devices events</strong> which changed their status to <code>ONLINE</code></li><li><code>filter_by.device_event.{device_id, filter_events}</code> set to e.g. <code>RESOURCE_PUBLISHED</code> to receive <strong>device events</strong></li><li><code>filter_by.device_event.{resource_id.{device_id, href}, filter_events}</code> set to e.g. <code>CONTENT_CHANGED</code> to receive <strong>resource events</strong></li></ul><p>Frst event returned after the successful subscription is of type <code>OperationProcessed</code>. Property <code>OperationProcessed.error_status.code</code> contains information if the subscription was successful. If it was successful, property <code>subscriptionId</code> is set. All events belonging to single <code>SubscribeForEvents</code> request are then identified by this <code>subscriptionId</code>.</p><p>If user losts a device <em>(unregistered / no more shared with the user)</em>, the client receives an event <code>SubscriptionCanceled</code> with corresponding <code>subcriptionId</code>.</p><h3 id=retrieve-resource-from-device>Retrieve Resource from Device <a class=header-link href=#retrieve-resource-from-device><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>The <code>RetrieveResourceFromDevice</code> retrieves resource content directly from the device - resource shadow value is not returned.</p><blockquote><p>This command execution is &ldquo;expensive&rdquo; as it has to reach the real device while your client synchronously waits for a response.</p></blockquote><h3 id=update-resource-content>Update Resource Content <a class=header-link href=#update-resource-content><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>The <code>UpdateResource</code> command requests resource update on the device.</p><h3 id=create-resource>Create Resource <a class=header-link href=#create-resource><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>The <code>Create Resource</code> command requests creation of a new resource on a specific collection on the device.</p><h3 id=delete-resource>Delete Resource <a class=header-link href=#delete-resource><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>The <code>DeleteResource</code> command requests device to delete a specific resource. Confirmation message doesn&rsquo;t mean that the resource was deleted. After successful deletion, devices unpublishes it&rsquo;s resource. This information is propagated to client in form of an <code>RESOURCE_UNPUBLISHED</code> event.</p><h4 id=contract>Contract <a class=header-link href=#contract><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h4><ul><li><a href=https://github.com/plgd-dev/cloud/blob/v2/grpc-gateway/pb/service.proto>service</a></li><li><a href=https://github.com/plgd-dev/cloud/blob/v2/grpc-gateway/pb/devices.proto>requests/responses</a></li><li><a href=https://github.com/plgd-dev/cloud/blob/v2/grpc-gateway/pb/clientConfiguration.proto>client configuration</a></li></ul><h3 id=go-lang-grpc-client>Go-Lang GRPC client <a class=header-link href=#go-lang-grpc-client><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><h3 id=creating-client>Creating client <a class=header-link href=#creating-client><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>Grpc-gateway uses TLS listener, so client must have properly configured TLS. Here is simple example how to create a grpc client.</p><div class=highlight><pre class=chroma><code class=language-go data-lang=go><span class=kn>import</span> <span class=p>(</span>
    <span class=s>&#34;google.golang.org/grpc&#34;</span>
	<span class=s>&#34;google.golang.org/grpc/credentials&#34;</span>
    <span class=s>&#34;github.com/plgd-dev/cloud/grpc-gateway/pb&#34;</span>
	<span class=s>&#34;github.com/plgd-dev/cloud/grpc-gateway/client&#34;</span>
<span class=p>)</span>

    <span class=o>...</span>
    <span class=c1>// Create TLS connection to the grpc-gateway.
</span><span class=c1></span>    <span class=nx>gwConn</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>grpc</span><span class=p>.</span><span class=nf>Dial</span><span class=p>(</span>
        <span class=nx>address</span><span class=p>,</span>
        <span class=nx>grpc</span><span class=p>.</span><span class=nf>WithTransportCredentials</span><span class=p>(</span><span class=nx>credentials</span><span class=p>.</span><span class=nf>NewTLS</span><span class=p>(</span><span class=nx>tlsConfig</span><span class=p>)),</span>
    <span class=p>)</span>
    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
        <span class=nb>panic</span><span class=p>(</span><span class=s>&#34;cannot connect to grpc-gateway: &#34;</span> <span class=o>+</span> <span class=nx>err</span><span class=p>.</span><span class=nf>Error</span><span class=p>())</span>
    <span class=p>}</span>
    <span class=c1>// Create basic client which was generated from proto files.
</span><span class=c1></span>    <span class=nx>basicClient</span> <span class=o>:=</span> <span class=nx>pb</span><span class=p>.</span><span class=nf>NewGrpcGatewayClient</span><span class=p>(</span><span class=nx>gwConn</span><span class=p>)</span>
    
    <span class=c1>// Create Extended client which provide us more friendly functions.
</span><span class=c1></span>    <span class=nx>extendedClient</span> <span class=o>:=</span> <span class=nx>client</span><span class=p>.</span><span class=nf>NewClient</span><span class=p>(</span><span class=nx>basicClient</span><span class=p>)</span>
    <span class=o>...</span>
</code></pre></div><h3 id=using-extended-grpc-client>Using extended grpc client <a class=header-link href=#using-extended-grpc-client><svg class="fill-current o-60 hover-accent-color-light" height="22" viewBox="0 0 24 24" width="22" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a></h3><p>More info in <a href=https://pkg.go.dev/github.com/plgd-dev/cloud/grpc-gateway/client>doc</a></p></div><h2>See Also</h2><ul><li><a href=/developing/authorization/>Authorization</a></li><li><a href=/developing/dashboard/>Dashboard</a></li><li><a href=/functions/3-interact/>Interact</a></li><li><a href=/functions/2-onboard/>Onboard</a></li><li><a href=/developing/resources/>Resources</a></li></ul></div></div><div class="order-0 w-20 dn db-l"><nav role=navigation><ul class="list pa0 nl2"><li class="f5 w-100 hover-bg-light-gray hover-accent-color-light fw8 mb1 bb b--moon-gray"><a href=javascript:void(0) class="js-toggle dib w-100 link mid-gray hover-accent-color-light pl2 pr2 pv2" data-target=.functions>Functions</a><ul class="functions desktopmenu animated fadeIn list pl0 bg-light-gray dn"><li class="f6 fw4"><a href=/functions/1-deploy/ class="db link hover-bg-gray hover-white pl3 pr2 pv2 black">1-Deploy</a></li></ul></li></ul></nav></div></div></article><div class="w-100 bg-light-gray"><div class="mw7 pa4 center nested-lh-copy lh-copy"><h6 class="f4 dark-gray mb2"><a href=https://next.plgd.dev/developing/grpc-client/ class="hide-child link primary-color"><span class="nl3 child"><svg class="grow" height="14" viewBox="0 0 24 24" width="14" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"/></svg></span>“gRPC Client”</a> was last updated: May 13, 2021: <a class="hide-child link primary-color" href=https://github.com/plgd-dev/cloud/commit/8303e053a06e6495f92b6de16fae1269092f6248>cleanup (8303e05)</a></h6><a href=https://github.com/plgd-dev/cloud/edit/master/content/en/developing/grpc-client.md class="f6 ph3 pv1 br2 dib tc ttu mv3 bg-primary-color white hover-bg-green link">Improve this page</a></div></div></main><footer class="bg-primary-color-dark ph4-ns pt4 relative w-100" role=contentinfo><div class="center flex-ns flex-wrap justify-between mw9 w-90"><div class="pb3 pt1 center"><div class="center w4"><img src=/images/plgd-logo-short-white.svg alt="plgd Logo"></div><ul class="center f6 list ma0 mv3 pa0 tc"><li class="dib mr3"><a href=https://github.com/plgd-dev/cloud/issues/new/ class="dim link light-gray pv2">File an Issue</a></li><li class="dib mr3"><a href=https://gitter.im/ocfcloud/Lobby class="dim link light-gray pv2">Discuss Source Code</a></li><li class=dib><a href=https://try.plgd.cloud class="dim link light-gray pv2">Try plgd Cloud</a></li></ul><div class="center f7 gray tc"> <p class=dib>© plgd.dev 2018–2021</p></div></div></div><div class="bg-primary-color-dark bottom-0 left-0 right-0 dn-l fixed pb3 ph3 w-100"><div class="globalmenu mobilemenu pb3 dn"><ul class="list hidden dib ph0 ma0 scrolling-touch tc"><li class="tl dib ma0 hover-bg-black w-100"><a href=/documentation/ class="ttu f6 link primary-color-light overflow hover-white db brand-font ma0 w-100 pv3 ph4">Docs</a></li><li class="tl dib ma0 hover-bg-black w-100"><a href=/news/ class="ttu f6 link primary-color-light overflow hover-white db brand-font ma0 w-100 pv3 ph4">News</a></li><li class="tl dib ma0 hover-bg-black w-100"><a href=https://gitter.im/ocfcloud/Lobby/ class="ttu f6 link primary-color-light overflow hover-white db brand-font ma0 w-100 pv3 ph4">Community</a></li><li class="tl dib ma0 hover-bg-black w-100"><a href=https://try.plgd.cloud class="ttu f6 link primary-color-light overflow hover-white db brand-font ma0 w-100 pv3 ph4">Try LIVE</a></li></ul></div><div class="docsmenu mobilemenu pb3 dn"><ul class="list dib ph0 ma0 scrolling-touch tc"><li class="tl dib ma0 hover-bg-black w-100 mb2 bb b--mid-gray"><a href=/functions/ class="ttu f6 link primary-color-light hover-white db brand-font mb1 ma0 w-100 pv2 ph4">Functions</a></li></ul></div><div class="flex dn-l justify-between"><button class="js-toggle flex-auto dib dn-l f6 tc db mt4-ns ph3 pv2 link mr2 white bg-primary-color-dark hover-bg-primary-color ba b--white-40 w-auto" data-target=.globalmenu>Menu</button>
<button class="js-toggle flex-auto dib dn-l f6 tc db mt4-ns ph3 pv2 link white bg-primary-color-dark hover-bg-primary-color ba b--white-40 w-auto" data-target=.docsmenu>Docs Menu</button></div></div></footer></body></html>